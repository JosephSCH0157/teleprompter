/* Overlay sheet */
.overlay{position:fixed;inset:0;background:rgba(0,0,0,.45);display:flex;align-items:flex-start;justify-content:center;padding:40px;z-index:9999}
.overlay.hidden{display:none}
.overlay .sheet{background:#0e141b;border:1px solid #1f2937;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.5);max-width:720px;width:100%;padding:20px}
.sheet-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.shortcuts-grid{display:grid;grid-template-columns:180px 1fr;gap:10px 16px;margin:8px 0 12px}
.shortcuts-grid .dim,.dim{opacity:.7}
kbd{display:inline-block;min-width:1.6em;padding:.15em .45em;border:1px solid #374151;border-bottom-width:2px;border-radius:6px;background:#111827;color:#e5e7eb;font:12px/1.2 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;text-align:center}
.btn-chip{background:#0e141b;border:1px solid var(--edge);padding:8px 10px;border-radius:10px;cursor:pointer;color:var(--fg)}
.btn-chip:hover{background:#10161d}
.sheet-section{margin-top:12px;padding-top:8px;border-top:1px solid var(--edge)}
#validatePanel pre{white-space:pre-wrap;-webkit-user-select:text;user-select:text;margin-top:8px;background:#0e141b;color:var(--fg);border:1px solid var(--edge);border-radius:12px;padding:12px;font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;font-size:13px;line-height:1.4;max-height:40vh;overflow:auto}

/* Savanna theme (subtle, non-intrusive) */
body.savanna { --edge:#a9763a; }
body.savanna::before{
    content:""; position:fixed; inset:0; pointer-events:none; z-index:-1;
    background:
        radial-gradient(1200px 800px at 85% -10%, rgba(214,125,45,.08), transparent 70%),
        radial-gradient(900px 600px at -10% 110%, rgba(194,59,34,.06), transparent 70%);
}
body.savanna::after{
    content:""; position:fixed; right:6%; bottom:6%; width:160px; height:160px;
    background:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220' viewBox='0 0 220 220'%3E%3Cg fill='%23d67d2d' fill-opacity='.10'%3E%3Ccircle cx='60' cy='60' r='28'/%3E%3Ccircle cx='115' cy='50' r='24'/%3E%3Ccircle cx='160' cy='75' r='22'/%3E%3Ccircle cx='85' cy='110' r='26'/%3E%3Cellipse cx='120' cy='155' rx='55' ry='36'/%3E%3C/g%3E%3C/svg%3E") center/contain no-repeat;
    filter: drop-shadow(0 2px 8px rgba(0,0,0,.2));
    pointer-events:none;
}

/* dB meter party mode */
#dbMeter.party .bar { animation: meterPulse 900ms linear infinite alternate; }
/* Animate top-bar meter fill when in party mode */
#dbMeterTop.party i { animation: meterPulse 900ms linear infinite alternate; }
@keyframes meterPulse { from { opacity:.6 } to { opacity:1 } }
.section-title {
    display: flex;
    align-items: center;
    gap: 10px;
}
select { font-size: 14px; }
.select-lg { font-size: 16px; }
.select-sm { font-size: 12px; }
    .select-md { font-size: 14px; }  /* tweak to taste */
    .hidden { display: none !important; }

/* Utility: visually hidden (accessible label) */
.visually-hidden{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap;border:0;padding:0;margin:-1px}

/* Stronger focus indicators for accessibility */
/* Use :focus-visible where supported to show only for keyboard focus */
button:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible, .chip:focus-visible {
    outline: 3px solid #2b90ff; /* high-contrast blue */
    outline-offset: 2px;
    box-shadow: 0 0 0 3px rgba(43,144,255,0.12);
}

/* Ensure chips can be focused for screen-reader users (if they are interactive spans) */
.chip[tabindex]{ cursor: pointer; }

/* Inline utility classes (deduped & merged) */
.inl-x3{font-variant-numeric:tabular-nums;font-size:64px;line-height:1;margin-top:6px;min-width:200px}
.inl-x2{font-size:14px;color:#96a0aa;margin-top:16px}
/* For .inl-x1 two different min-widths appeared (200px, 240px); using the larger for layout safety */
.inl-x1{min-width:240px}
/* Inline style extractions (pass) */
.inl-x7{font-size:14px;color:#96a0aa}
/* Inline style extractions (pass) */
.inl-x6{background:#0e141b;border:1px solid var(--edge);padding:24px 32px;border-radius:16px;text-align:center}
/* Inline style extractions (pass) */
.inl-x5{min-width:200px}
/* Inline style extractions (pass) */
.inl-x4{display:none}
/* (Removed duplicate .inl-x1/.inl-x2/.inl-x3 definitions) */
/* Inline style extractions */
.inl-1{border:1px solid var(--edge); padding:4px 10px; border-radius:10px; background:#0e141b; color:var(--fg); margin-left:auto}
.inl-2{min-width:240px}
.inl-3{margin-top:16px}
.inl-4{min-width:200px}
.inl-5{display:none}
.inl-6{min-width:200px}
.inl-7{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.6);z-index:9999}
.inl-8{background:#0e141b;border:1px solid var(--edge);padding:24px 32px;border-radius:16px;text-align:center}
.inl-9{font-size:14px;color:#96a0aa}
.inl-10{font-variant-numeric:tabular-nums;font-size:64px;line-height:1;margin-top:6px}


    :root{ --bg:#0b0d10; --fg:#e7ebf0; --muted:#96a0aa; --accent:#7cc4ff; --card:#151a20; --edge:#22303d; --s1-color:#2ea8ff; --s2-color:#ff6b6b; }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";min-height:100svh;min-height:100dvh;display:flex;flex-direction:column}

    /* Reserve fixed layout slots to prevent layout shifts (CLS) */
    :root{ --topbar-h:56px; --statusbar-h:28px; --sidebar-w:320px; }
    /* topbar: align chips to timer/marker baseline; use 8px spacing multiples */
    .topbar{display:flex;align-items:center;gap:8px;position:sticky;top:0;background:linear-gradient(var(--bg),transparent);padding:8px 16px;border-bottom:1px solid var(--edge);z-index:10;height:var(--topbar-h);box-sizing:border-box}
    .topbar strong{letter-spacing:.2px}

    /* Robust topbar hairline / overlay
       - Add a thin overlay separator so the topbar appears crisp over varying backgrounds.
       - Use a pseudo-element to avoid layout shift and to keep the rule high-specificity but low-impact.
       - Provide a fallback hairline for high-DPI by using transform translateZ(0.001px) to force a hairline in some browsers.
    */
    .topbar::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        top: 100%; /* sit just below the bar */
        height: 3px;
        pointer-events: none;
        background: linear-gradient(rgba(255,255,255,0.06), rgba(255,255,255,0.02));
        z-index: 160;
        transform: translateZ(0.001px);
    }

    /* A subtle overlay when the player is in front/display mode to ensure separation from content */
    .topbar.overlay {
        background: rgba(0,0,0,0.35);
    }

    /* Optional hairline variant for very dark backgrounds */
    .topbar.hairline-strong::after {
        background: linear-gradient(rgba(255,255,255,0.08), rgba(255,255,255,0.02));
    }
        /* Explicit small separator utility for use in markup where a compact hairline is needed */
        .header-sep {
            height: 1px;
            background: linear-gradient(to right, rgba(0,0,0,.15), rgba(0,0,0,.08) 40%, rgba(255,255,255,.35) 40%, rgba(255,255,255,.15));
            mix-blend-mode: multiply; /* keeps contrast across themes */
        }
    /* top-bar label rhythm & consistency */
    .chip{font-size:0.9rem;font-weight:600;color:var(--muted);border-radius:.5rem;padding:6px 8px}
    #debugPosChip{font-family:monospace; width:160px; flex-shrink:0; text-align:center}
.legend{display:flex;gap:8px;flex-wrap:wrap;margin-left:auto}
.tag{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border:1px solid var(--edge);border-radius:999px;font-size:12px;background:#0e141b}
.tag .dot{width:10px;height:10px;border-radius:50%}

    /* Segmented LED dB meter */
    /* Top-bar dB meter (primary) */
    #dbMeterTop{display:flex;gap:2px;height:14px;align-items:flex-end;margin-left:12px;position:relative;padding:0 2px;border:1px solid var(--edge);border-radius:4px;overflow:hidden;background:linear-gradient(90deg,#124,#124 5%,#135 5%,#135 20%,#145 20%,#145 40%,#254 40%,#352 60%,#542 80%,#731 90%,#921 95%,#b11);background-size:100% 100%;}
    .bar{width:6px;height:100%;background:linear-gradient(to top,var(--bar-color,#175030),var(--bar-color,#175030));flex:0 0 auto;opacity:.25;border-radius:2px;position:relative;transition:opacity .12s linear, filter .2s ease}
    .bar.on{opacity:1;filter:brightness(1.15)}
    /* Peak hold indicator */
    #dbMeterTop .peak-marker{position:absolute;top:-3px;height:3px;width:6px;background:#fff;border-radius:1px;box-shadow:0 0 4px rgba(255,255,255,.6);opacity:.85;transition:transform .08s linear, opacity .3s ease, background-color .15s linear, box-shadow .15s linear;}

    /* app contains sidebar + main viewer; topbar is outside .app in the DOM, so keep rows out of this grid */
    .app{display:grid;grid-template-columns:var(--sidebar-w) 1fr;flex:1 1 auto;min-height:0}
    .sidebar{width:var(--sidebar-w)}
    .statusbar{height:var(--statusbar-h);box-sizing:border-box}
    .panel{padding:16px;border-right:1px solid var(--edge);overflow:auto;background:var(--card);min-height:0}
    .panel h2{margin:0 0 12px;font-size:18px}
    .panel .row{display:flex;gap:8px;flex-wrap:wrap;margin:8px 0}
    /* buttons/inputs: consistent radius and rhythm (multiples of 4/8) */
    :root{ --btn-radius: .5rem; }
    button,select,input[type="number"],input[type="text"]{background:#0e141b;color:var(--fg);border:1px solid var(--edge);padding:8px 12px;border-radius:var(--btn-radius);cursor:pointer}

    /* subtle focus ring for keyboard accessibility */
    button:focus, input:focus, select:focus, textarea:focus{ outline:2px solid rgba(255,255,255,.08); outline-offset:2px; }
    button:focus-visible{ outline:2px solid rgba(255,255,255,.3); }

    /* hover/active transitions for smoothness */
    button, .chip, input, select, textarea{ transition: all 0.1s ease-out; }

    /* Make the Auto-scroll speed input easier to adjust with mouse/touch
       - slightly wider for click targets
       - larger font for readability
       - horizontal-resize cursor to hint at drag/adjust behavior */
    #autoSpeed{
        width:110px;
        padding-left:12px;
        padding-right:12px;
        font-size:15px;
        cursor:ew-resize;
    }
    button:disabled{opacity:.5;cursor:not-allowed}
    /* Emphasized primary action button */
    .btn-primary{font-size:16px;padding:10px 14px;border-radius:12px;font-weight:600}
    .btn-start{background:#0e2534;border-color:#2b90ff;color:#cfe8ff;box-shadow:0 0 0 1px #2b90ff55 inset}
    .btn-start:hover{background:#0f2b3d}
    .btn-stop{background:#2b0e11;border-color:#ff5353;color:#ffd6d6;box-shadow:0 0 0 1px #ff535355 inset}
    .btn-stop:hover{background:#351015}
    .btn-subtle{opacity:.9}
    textarea{width:100%;min-height:160px;background:#0e141b;color:var(--fg);border:1px solid var(--edge);border-radius:12px;padding:12px}
    .status{font-size:12px;color:var(--muted)}
    .timer{font-variant-numeric:tabular-nums;font-size:28px;margin:0 0 0 8px}

    .viewer{position:relative;overflow:auto;min-height:0}
    .script{max-width:900px;margin:0 auto;padding:40px}
    .script p{font-size:48px;line-height:1.35;margin:0 0 28px}
    .u{ text-decoration: underline; }
.note{ color: var(--muted); font-style: italic; margin:0 0 28px }

    .marker{position:sticky;top:40%;height:2px;background:var(--accent);box-shadow:0 0 6px var(--accent)}

    body.listening .script p{ color:#cfe8ff; }
    body.listening .marker{ background:#9bd2ff; box-shadow:0 0 10px #9bd2ff; }
    body.listening .topbar{ box-shadow:0 2px 0 rgba(124,196,255,.35) inset; }
    /* Make record button clearly red while listening */
    body.listening #recBtn{ background:#c81919; color:#fff; border-color:#ff6969; box-shadow:0 0 0 1px #ff696955 inset; }
    body.listening #recBtn:hover{ background:#b31818; }

    @supports(height: 100dvh){ body{ min-height:100dvh; } }

    /* Camera overlay - fixed to viewport so it doesn't scroll with the script */
    .camWrap{ position:fixed; right:16px; bottom:16px; width:280px; aspect-ratio:16/9; border:1px solid var(--edge); border-radius:12px; overflow:hidden; box-shadow:0 6px 22px rgba(0,0,0,.45); background:#000; opacity:1; z-index:20; display:none; }
    .camWrap.mirrored video{ transform: scaleX(-1); }
    .camWrap video{ width:100%; height:100%; object-fit:cover; display:block; aspect-ratio:16/9 }
    .toolbar{display:flex;gap:6px;flex-wrap:wrap}
.toolbar button{font-size:6px;padding:6px 8px}

/* OBS toggle */

/* Hard reset for text-ish inputs inside Settings so they never look like checkboxes */
.settings-card input[type="text"],
.settings-card input[type="password"],
.settings-card input[type="number"],
.settings-card input[type="url"]{
    -webkit-appearance: none;
    appearance: none;
    color: var(--fg);
    background: var(--panel, #0e141b);
    border: 1px solid var(--edge);
    border-radius: 8px;
    padding: 8px 10px;
    min-width: 220px;                /* ensure it doesn't collapse */
}
.settings-card input::placeholder{ color: var(--muted); opacity:.9; }
.obs-toggle-label{display:flex;align-items:center;gap:6px}
.obs-status{opacity:.75}
.obs-url{min-width:210px}
.obs-pass{min-width:140px}
.settings-sheet{max-width:860px}
/* Target the sheet element itself (markup uses <div class="sheet settings-sheet">)
   and keep overscroll contained so switching tabs doesn't cause viewport scroll.
*/
.overlay .sheet.settings-sheet{max-height:80vh; overflow-y:auto; overscroll-behavior:contain}

/* Make the card container a positioning context and prevent scroll-anchor jumps */
.settings-body{display:flex;flex-direction:column;gap:18px; min-height:340px; position:relative; overflow-anchor:none}
@media (max-height:740px){ .settings-body{min-height:300px} }
.settings-title{margin:0}
.settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}

/* Cards: start hidden; only show when activated to avoid flicker */
.settings-card{border:1px solid var(--edge);padding:14px 16px;border-radius:10px;background:#0e141b;display:none;flex-direction:column;gap:10px}

/* Cross-fade animations; outgoing card shouldn’t push layout */
@keyframes cardFadeIn { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }
@keyframes cardFadeOut { from { opacity:1; transform:translateY(0); } to { opacity:0; transform:translateY(4px); } }
.anim-in{animation:cardFadeIn .22s ease-out}
.anim-out{animation:cardFadeOut .18s ease-in}

/* take the fading-out card out of flow while animating and disable interactions */
.settings-card.anim-out{position:absolute;inset:0;width:100%;pointer-events:none}
.settings-card h4{margin:0 0 4px;font-size:15px}
.settings-small{font-size:12px;color:var(--muted)}
.settings-inline-row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
.settings-tabs{display:flex;gap:6px;margin:4px 0 4px;flex-wrap:wrap}
.settings-tab{background:#0e141b;border:1px solid var(--edge);padding:6px 10px;border-radius:20px;font-size:12px;cursor:pointer}
.settings-tab.active{background:#12202a;color:var(--accent);border-color:var(--accent)}
.settings-footer{margin-top:8px;opacity:.7;text-align:right}
/* Settings card animations */
@keyframes cardFadeIn { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }
@keyframes cardFadeOut { from { opacity:1; transform:translateY(0); } to { opacity:0; transform:translateY(4px); } }
.anim-in{animation:cardFadeIn .22s ease-out;}
.anim-out{animation:cardFadeOut .18s ease-in;}

/* Sidebar hint for relocated media/OBS controls */
.sidebar-hint{flex:1 1 100%;text-align:left;opacity:.75}

/* Disable browser smooth scrolling for live-follow (always snap immediately) */
#viewer, #scriptScrollContainer { scroll-behavior: auto !important; }

/* Subtle CK watermark */
body.ck::after{
    content:"CK";
    position:fixed; left:10px; bottom:10px; z-index:9999;
    font:600 11px/1 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    letter-spacing:2px;
    color:#d67d2d; opacity:.18;
    pointer-events:none;
}

/* Mirror mode for teleprompter */
.mirror .viewer{ transform: scaleX(-1); }

/* Toast system */
.tp-toast-container{position:fixed;right:16px;bottom:16px;display:flex;flex-direction:column;gap:8px;z-index:2147483646;max-width:320px}
.tp-toast{background:#0e141b;border:1px solid var(--edge);color:var(--fg);padding:10px 12px;border-radius:8px;box-shadow:0 8px 20px rgba(0,0,0,.6);opacity:0;transform:translateY(6px) scale(.99);transition:all 0.1s ease-out}
.tp-toast.show{opacity:1;transform:translateY(0) scale(1)}
.tp-toast.warn{border-color:#E0A43C}
.tp-toast.error{border-color:#E03E3E}
.tp-toast.ok{border-color:#3CE07A}

/* status color tokens for chips */
.chip.rec-recording{background:#3e0b0b;color:#ffd6d6;border-color:#E03E3E}
.chip.obs-connected{background:#06371a;color:#dfffe8;border-color:#3CE07A}
.chip.obs-reconnecting{background:#31250f;color:#fff6e8;border-color:#E0A43C}
.chip.idle{background:#0e141b;color:var(--muted);border-color:var(--edge)}
/* Recording emphasis for generic chips (used by #obsChip) */
.chip-live{ background: rgba(229,57,53,.18); border-color: rgba(229,57,53,.5); }
/* Error state */
.chip.obs-error{ background:#3e0b0b; color:#ffd6d6; border-color:#E03E3E }
/* OBS test icon within chip */
.obs-test-icon{
    display:inline-block; margin-left:6px; font-style:normal; font-weight:700; opacity:0; transform: translateY(-2px) scale(0.9);
    transition: opacity .18s ease, transform .18s ease; user-select:none;
}
.obs-test-icon.show{ opacity:1; transform: translateY(0) scale(1); }
.obs-test-icon.ok{ color:#b7f4c9; }
.obs-test-icon.error{ color:#ffd6d6; }

/* Inline OBS test message */
.obs-test-msg{font-size:13px;padding:6px 8px;border-radius:8px}
.obs-test-ok{background:rgba(56,161,105,0.08);color:#b7f4c9;border:1px solid rgba(56,161,105,0.18)}
.obs-test-error{background:rgba(224,62,62,0.06);color:#ffd6d6;border:1px solid rgba(224,62,62,0.12)}

/* Settings: consistent checkbox label alignment/visibility */
.tp-check{display:inline-flex;align-items:center;gap:.5rem}
.tp-check input{vertical-align:middle}

/* Settings row layout */
.settings-row { display:flex; flex-wrap:wrap; align-items:center; gap:12px; }

/* Label + field */
.tp-field { display:inline-flex; flex-direction:column; gap:6px; }
.tp-field > span { font-size:.85rem; color: var(--muted); line-height:1; }
.input-url { width: 240px; }
.input-port { width: 96px; }

/* Checkbox label */
.tp-check { display:inline-flex; align-items:center; gap:.5rem; }

/* Inputs visible on dark panels */
.settings-card input[type="text"],
.settings-card input[type="password"],
.settings-card input[type="number"]{
    color: var(--fg);
    background: var(--panel, #0e141b);
    border: 1px solid var(--edge);
    border-radius: 8px;
    padding: 8px 10px;
}
.settings-card input::placeholder{ color: var(--muted); opacity: .9; }

/* Status pill */
.obs-pill{
    display:inline-flex; align-items:center; gap:6px;
    padding: 4px 8px; border-radius: 999px;
    background: rgba(255,255,255,.06); color: var(--muted);
}

/* Ghost button for low-importance actions */
.btn-ghost {
    background: transparent;
    border: 1px solid var(--edge);
    color: var(--muted);
}
.btn-ghost:hover { color: var(--fg); }

/* Invalid field hint */
.is-invalid {
    border-color: var(--danger, #d33);
    box-shadow: 0 0 0 1px var(--danger, #d33) inset;
}

/* --- Appended: Overlay visibility + Present Mode layout --- */
/* Quick overlay visibility toggle */
#settingsOverlay.hidden, #shortcutsOverlay.hidden { display: none !important; }

/* Make viewer a constrained scroll area in normal mode */
#viewer {
    /* Use dynamic viewport block to avoid mobile URL bar tricks; fallback below */
    block-size: calc(100dvb - var(--topbar-h) - var(--statusbar-h));
    /* Fallback if dvb isn't supported: */
    height: calc(100vh - var(--topbar-h) - var(--statusbar-h));
}

/* Present Mode already overrides #viewer to full-viewport; keep that rule last */

/* Present Mode */
html.tp-present .sidebar,
html.tp-present .panel,
html.tp-present .topbar { display: none !important; }

html.tp-present #viewer {
    width: 100vw; height: 100vh;
    padding: 4vh 6vw;
    font-size: clamp(24px, 4.0vw, 72px);
    line-height: 1.35;
}

/* Present-mode emergency exit button */
.present-exit {
    position: fixed;
    top: 8px;
    left: 8px;
    z-index: 10000;
    display: none;
    padding: 8px 10px;
    border-radius: 8px;
    background: rgba(20,20,20,.8);
    color: #fff;
    border: 1px solid rgba(255,255,255,.25);
    font: 600 12px/1 system-ui, sans-serif;
}
html.tp-present .present-exit { display: inline-flex; }

/* Top-bar: clearer separator and dB meter visibility */
.topbar { border-bottom: 1px solid var(--hairline, #2a2a2a); }
#dbMeter { display: inline-flex; align-items: center; gap: 6px; }

/* dB meter layout (detailed) */
#dbMeter {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    min-width: 120px;
}
#dbMeter .bar {
    position: relative;
    width: 80px;
    height: 6px;
    border-radius: 999px;
    overflow: hidden;
    background: rgba(255,255,255,.1);
}
#dbMeter .bar i {
    position: absolute;
    inset: 0;
    transform-origin: left center;
    transform: scaleX(0);
    background: linear-gradient(90deg, #4caf50 0%, #ffc107 60%, #e53935 100%);
}

/* (Removed empty script hint overlay; using classic placeholder lines) */

/* Topbar hairline */
.topbar { border-bottom: 1px solid rgba(255,255,255,.12); }

/* Hide numeric speaker chip (we use colored legend instead) */
#speakerIndexChip { display: none !important; }

/* Overlays */
.hidden { display: none !important; }
.overlay {
    position: fixed; inset: 0; display: flex; align-items: center; justify-content: center;
    background: rgba(0,0,0,.55); z-index: 9990;
}
.overlay .sheet {
    max-width: min(900px, 92vw); max-height: 86vh; overflow: auto;
    background: #0f1115; border: 1px solid rgba(255,255,255,.15); border-radius: 14px;
    padding: 16px 18px;
}

/* Colored speaker legend (right side of topbar) */
.legend { display: inline-flex; gap: 10px; align-items: center; margin-left: 14px; }
.legend .tag { display: inline-flex; gap: 6px; align-items: center; font-weight: 600; opacity: .9; }
.legend .dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }

/* Centered empty-script banner inside the viewer */
#viewer { position: relative; }
#viewer .empty-msg {
    position: absolute; inset: 0;
    display: flex; align-items: center; justify-content: center;
    font-style: italic;
    font-size: clamp(26px, 4.8vw, 72px);
    color: rgba(255,255,255,.85);
    text-align: center;
    pointer-events: none;
}

/* Compact Mode selector in topbar */
.topbar select#scrollMode {
    background: transparent; color: inherit; border: 1px solid rgba(255,255,255,.2);
    border-radius: 6px; padding: 2px 8px; font: inherit;
}
.topbar label[for="scrollMode"] { margin-right: 6px; }
